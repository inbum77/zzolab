import streamlit as st
import base64
from PIL import Image, ImageDraw, ImageFont
from io import BytesIO

# í…ìŠ¤íŠ¸ë¡œ ì´ë¯¸ì§€ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
def create_text_image(name, bgColor=(240, 240, 240), textColor=(0, 0, 0), size=(200, 200)):
    img = Image.new('RGB', size, color=bgColor)
    draw = ImageDraw.Draw(img)
    
    # í…ìŠ¤íŠ¸ ì¤‘ì•™ì— ë°°ì¹˜
    text = name
    text_width = draw.textlength(text, font=None)
    text_position = ((size[0] - text_width) / 2, size[1] / 2 - 10)
    
    # í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°
    draw.text(text_position, text, fill=textColor)
    
    return img

# ì´ë¯¸ì§€ë¥¼ base64ë¡œ ì¸ì½”ë”©í•˜ì—¬ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
def get_image_base64(img):
    buffered = BytesIO()
    img.save(buffered, format="JPEG")
    img_str = base64.b64encode(buffered.getvalue()).decode()
    return img_str

# ìºë¦­í„° ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜ (ê° MBTIë³„ íŠ¹ìƒ‰ ìˆëŠ” ìƒ‰ìƒ ì‚¬ìš©)
def get_character_image(name, mbti_type):
    # MBTI ìœ í˜•ë³„ ìƒ‰ìƒ ë§¤í•‘
    color_map = {
        "INTJ": (75, 0, 130),   # ë³´ë¼ìƒ‰ - ë¶„ì„ê°€
        "INTP": (0, 0, 139),    # ì§™ì€ íŒŒë€ìƒ‰ - ì‚¬ìƒ‰ê°€
        "INFJ": (147, 112, 219), # ë¼ë²¤ë”ìƒ‰ - ì˜ˆì–¸ì
        "INFP": (221, 160, 221), # ì—°ë³´ë¼ìƒ‰ - ì¤‘ì¬ì
        "ENTJ": (178, 34, 34),  # ì ê°ˆìƒ‰ - í†µì†”ì
        "ENTP": (255, 69, 0),   # ì£¼í™©ë¹¨ê°„ìƒ‰ - ë°œëª…ê°€
        "ENFJ": (255, 20, 147), # í•«í•‘í¬ - ì„ ë„ì
        "ENFP": (255, 105, 180), # ë¶„í™ìƒ‰ - í™œë™ê°€
        "ISTJ": (47, 79, 79),   # ì§™ì€ íšŒìƒ‰ - ì‹¤ë¬´ì
        "ISTP": (105, 105, 105), # íšŒìƒ‰ - ì¥ì¸
        "ISFJ": (107, 142, 35), # ì˜¬ë¦¬ë¸Œìƒ‰ - ìˆ˜í˜¸ì
        "ISFP": (154, 205, 50), # ì—°ë‘ìƒ‰ - íƒí—˜ê°€
        "ESTJ": (0, 100, 0),    # ì§™ì€ ë…¹ìƒ‰ - ê²½ì˜ì
        "ESTP": (34, 139, 34),  # ë…¹ìƒ‰ - ê¸°ì—…ê°€
        "esfj": (70, 130, 180), # ê°•ì²  íŒŒë€ìƒ‰ - ì§‘ì •ê´€
        "ESFP": (30, 144, 255)  # í•˜ëŠ˜ìƒ‰ - ì—°ì˜ˆì¸
    }
    
    # í•´ë‹¹ MBTI ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸° (ê¸°ë³¸ê°’ì€ íšŒìƒ‰)
    bg_color = color_map.get(mbti_type, (200, 200, 200))
    
    # í…ìŠ¤íŠ¸ ìƒ‰ìƒì€ ë°°ê²½ ìƒ‰ìƒì´ ì–´ë‘ìš°ë©´ ë°ê²Œ, ë°ìœ¼ë©´ ì–´ë‘¡ê²Œ
    brightness = (bg_color[0] * 299 + bg_color[1] * 587 + bg_color[2] * 114) / 1000
    text_color = (255, 255, 255) if brightness < 128 else (0, 0, 0)
    
    return create_text_image(name, bg_color, text_color)

mbti_info = {
    "INTJ": {
        "ì„±ê²©": "ì „ëµì ì´ê³  ë…ë¦½ì ì¸ ì‚¬ê³ ë¥¼ ì¢‹ì•„í•˜ëŠ” ë¶„ì„ê°€ì˜ˆìš” ğŸ§ ğŸ“Š",
        "ì¥ì ": ["ê³„íšì ì„ âœ…", "ë¬¸ì œ í•´ê²°ì— ëŠ¥í•¨ ğŸ› ï¸", "ìê¸° ì£¼ë„ì ì„ ğŸš€"],
        "ë‹¨ì ": ["ì™„ë²½ì£¼ì˜ ì„±í–¥ ğŸ˜µ", "ê°ì •ì„ ì˜ ë“œëŸ¬ë‚´ì§€ ì•ŠìŒ ğŸ˜", "ìœµí†µì„±ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ ğŸ”’"],
        "ì¥ì _íŒ": "ê³„íšì ì¸ ë©´ì„ ì‚´ë ¤ í”„ë¡œì íŠ¸ë¥¼ ì£¼ë„í•´ë³´ì„¸ìš”! ğŸ’¼âœ¨",
        "ë‹¨ì _íŒ": "ê°ì •ì„ ë‚˜ëˆ„ê³ , ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš” ğŸŒ¿ğŸ—£ï¸",
        "ì—°ì˜ˆì¸": [
            "ì—˜ë¡  ë¨¸ìŠ¤í¬",
            "ì•„ì´ìœ "
        ]
    },
    "INTP": {
        "ì„±ê²©": "í˜¸ê¸°ì‹¬ ë§ê³  ë¶„ì„ì ì¸ ì² í•™ìì˜ˆìš” ğŸ¤“ğŸ”",
        "ì¥ì ": ["ì°½ì˜ì  ğŸ¨", "ë…¼ë¦¬ì  ì‚¬ê³  ğŸ§ ", "ë…ë¦½ì  ğŸ§â€â™‚ï¸"],
        "ë‹¨ì ": ["í˜„ì‹¤ ê°ê° ë¶€ì¡± ğŸŒ«ï¸", "ê°ì • í‘œí˜„ ì–´ë ¤ì›€ ğŸ˜¶"],
        "ì¥ì _íŒ": "ë³µì¡í•œ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì„ ì—°êµ¬ë‚˜ ê¸°íšì— í™œìš©í•´ë³´ì„¸ìš”! ğŸ§ª",
        "ë‹¨ì _íŒ": "ì†Œí†µì„ í†µí•´ ì•„ì´ë””ì–´ë¥¼ í˜„ì‹¤ê³¼ ì—°ê²°í•´ë³´ì„¸ìš”. ğŸ’¬ğŸ”—",
        "ì—°ì˜ˆì¸": [
            "ì•¨ë²„íŠ¸ ì•„ì¸ìŠˆíƒ€ì¸",
            "ê³µìœ "
        ]
    },
    "INFJ": {
        "ì„±ê²©": "í†µì°°ë ¥ ìˆê³  ì´ìƒì£¼ì˜ì ì¸ ì¡°ì–¸ìì˜ˆìš” ğŸ”®ğŸ’¬",
        "ì¥ì ": ["ê¹Šì€ ê³µê° ëŠ¥ë ¥ â¤ï¸", "í†µì°°ë ¥ ğŸ‘ï¸", "ë„ì›€ ì£¼ê¸°ë¥¼ ì¢‹ì•„í•¨ ğŸ¤"],
        "ë‹¨ì ": ["ë‚´í–¥ì  ê²½í–¥ ğŸ¤", "ê°ì • ê¸°ë³µ ğŸ“‰"],
        "ì¥ì _íŒ": "íƒ€ì¸ì„ ì´í•´í•˜ê³  ë•ëŠ” ëŠ¥ë ¥ì„ ìƒë‹´ì´ë‚˜ êµìœ¡ ë¶„ì•¼ì— ì‚´ë ¤ë³´ì„¸ìš” ğŸ“",
        "ë‹¨ì _íŒ": "ìŠ¤ìŠ¤ë¡œì˜ ê°ì •ì„ ê´€ë¦¬í•˜ë©° ìê¸° ëŒë´„ì„ ìŠì§€ ë§ˆì„¸ìš” ğŸŒ¸",
        "ì—°ì˜ˆì¸": [
            "ì¹¼ ìœµ",
            "ì •í•´ì¸"
        ]
    },
    "INFP": {
        "ì„±ê²©": "ì´ìƒê³¼ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ë‚­ë§Œì£¼ì˜ìì˜ˆìš” ğŸŒˆğŸ“š",
        "ì¥ì ": ["ì°½ì˜ì  ğŸ­", "ì´íƒ€ì  ğŸ’–", "ê¹Šì€ ë‚´ë©´ì˜ ì„±ì°° ğŸ¤”"],
        "ë‹¨ì ": ["í˜„ì‹¤ ë„í”¼ ê²½í–¥ ğŸ•³ï¸", "ê²°ë‹¨ë ¥ ë¶€ì¡± ğŸ˜“"],
        "ì¥ì _íŒ": "ì˜ˆìˆ , ë¬¸í•™, ë´‰ì‚¬í™œë™ ë“± ê°€ì¹˜ ìˆëŠ” í™œë™ìœ¼ë¡œ í‘œí˜„í•´ë³´ì„¸ìš” ğŸ¨",
        "ë‹¨ì _íŒ": "ì‘ì€ ê²°ì •ë¶€í„° ì‹¤ì²œí•˜ë©° í˜„ì‹¤ê°ì„ í‚¤ì›Œë³´ì„¸ìš” ğŸª´",
        "ì—°ì˜ˆì¸": [
            "ìœŒë¦¬ì—„ ì…°ìµìŠ¤í”¼ì–´",
            "íƒœì—°"
        ]
    },
    "ENTJ": {
        "ì„±ê²©": "ë¦¬ë”ì‹­ ìˆê³  ì¶”ì§„ë ¥ ê°•í•œ í†µì†”ìì˜ˆìš” ğŸ‘‘âš¡",
        "ì¥ì ": ["ê²°ë‹¨ë ¥ ğŸ’ª", "ëª©í‘œ ì§€í–¥ì  ğŸ¯", "í†µì†”ë ¥ ğŸ‘"],
        "ë‹¨ì ": ["ì§€ë‚˜ì¹˜ê²Œ ê²½ìŸì  ğŸ”¥", "ê°ì •ì— ë¬´ê´€ì‹¬í•  ìˆ˜ ìˆìŒ ğŸ˜¶"],
        "ì¥ì _íŒ": "ì¡°ì§ì„ ì´ë„ëŠ” ë¦¬ë” ì—­í• ì—ì„œ ì§„ê°€ë¥¼ ë°œíœ˜í•´ë³´ì„¸ìš” ğŸ¢",
        "ë‹¨ì _íŒ": "ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ê°ì •ì„ ì‚´í”¼ê³  ë°°ë ¤í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš” ğŸ¤—",
        "ì—°ì˜ˆì¸": [
            "ë§ˆê±°ë¦¿ ëŒ€ì²˜",
            "ê¹€í˜œìˆ˜"
        ]
    },
    "ENTP": {
        "ì„±ê²©": "í˜¸ê¸°ì‹¬ ë§ê³  ë…¼ìŸì„ ì¦ê¸°ëŠ” í˜ì‹ ê°€ì˜ˆìš” ğŸ’­ğŸ”",
        "ì¥ì ": ["ì°½ì˜ì  ğŸ’¡", "ë…¼ë¦¬ì  ğŸ§©", "ì ì‘ë ¥ ìˆìŒ ğŸ¬"],
        "ë‹¨ì ": ["ê·œì¹™ì„ ì‹«ì–´í•¨ ğŸš«", "ì§‘ì¤‘ë ¥ ë¶€ì¡± ğŸ“¢", "ë…¼ìŸì  ğŸ”¥"],
        "ì¥ì _íŒ": "ì°½ì˜ì„±ê³¼ ë…¼ë¦¬ë ¥ì„ ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ê°œë°œì— í™œìš©í•´ë³´ì„¸ìš” ğŸš€",
        "ë‹¨ì _íŒ": "ì¤‘ìš”í•œ ì¼ì— ì—ë„ˆì§€ë¥¼ ì§‘ì¤‘í•˜ê³  íƒ€ì¸ì˜ ì˜ê²¬ë„ ì¡´ì¤‘í•´ë³´ì„¸ìš” ğŸ¯",
        "ì—°ì˜ˆì¸": [
            "ë§ˆí¬ íŠ¸ì›¨ì¸",
            "ì´ì˜ì"
        ]
    },
    "ENFP": {
        "ì„±ê²©": "ì—ë„ˆì§€ ë„˜ì¹˜ê³  ì°½ì˜ì ì¸ ì—´ì •ê°€ì˜ˆìš” ğŸŒŸğŸ‰",
        "ì¥ì ": ["ì‚¬êµì  ğŸ—£ï¸", "ê¸ì •ì  ğŸŒ", "ì•„ì´ë””ì–´ í’ë¶€ ğŸ’¡"],
        "ë‹¨ì ": ["ì‚°ë§Œí•  ìˆ˜ ìˆìŒ ğŸŒ€", "ê³„íš ë¶€ì¡± ğŸ“†âŒ"],
        "ì¥ì _íŒ": "ë‹¤ì–‘í•œ ì‚¬ëŒê³¼ì˜ ì†Œí†µì—ì„œ ì°½ì˜ë ¥ì„ ë°œíœ˜í•´ë³´ì„¸ìš” ğŸ­",
        "ë‹¨ì _íŒ": "ì¼ì •ì„ ì •ë¦¬í•˜ê³  ëª©í‘œë¥¼ ì„¤ì •í•´ ì§‘ì¤‘ë ¥ì„ ë†’ì—¬ë³´ì„¸ìš” ğŸ“‹ğŸ–Šï¸",
        "ì—°ì˜ˆì¸": [
            "ë¡œë²„íŠ¸ ë‹¤ìš°ë‹ˆ ì£¼ë‹ˆì–´",
            "ìœ ì¬ì„"
        ]
    },
    "ENFJ": {
        "ì„±ê²©": "ë”°ëœ»í•˜ê³  ì—´ì •ì ì¸ ë¦¬ë”ì˜ˆìš” ğŸ”¥ğŸ¤",
        "ì¥ì ": ["ì¹´ë¦¬ìŠ¤ë§ˆ ìˆìŒ âœ¨", "ê³µê° ëŠ¥ë ¥ ë›°ì–´ë‚¨ â¤ï¸", "ì¡°ì§ì  ğŸ—‚ï¸"],
        "ë‹¨ì ": ["ìê¸° í¬ìƒì  ê²½í–¥ ğŸ˜“", "ì™„ë²½ì£¼ì˜ ğŸ“"],
        "ì¥ì _íŒ": "ì¡°ì§ ë‚´ ë¦¬ë”ë¡œì„œ íŒ€ì›ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ì–´ë³´ì„¸ìš” ğŸ§‘â€ğŸ¤â€ğŸ§‘",
        "ë‹¨ì _íŒ": "ìì‹ ì„ ëŒë³´ëŠ” ì‹œê°„ì„ í™•ë³´í•˜ì„¸ìš” ğŸ§˜â€â™€ï¸",
        "ì—°ì˜ˆì¸": [
            "ë°”ë½ ì˜¤ë°”ë§ˆ",
            "ë°•ë³´ì˜"
        ]
    },
    "ESTJ": {
        "ì„±ê²©": "ì‹¤ìš©ì ì´ê³  ì±…ì„ê° ê°•í•œ ê´€ë¦¬ìì˜ˆìš” ğŸ“‹ğŸ”§",
        "ì¥ì ": ["ì²´ê³„ì  ğŸ“Š", "í˜„ì‹¤ì  ğŸ§±", "ë¦¬ë”ì‹­ ê°•í•¨ ğŸ§­"],
        "ë‹¨ì ": ["ìœµí†µì„± ë¶€ì¡± ğŸ”’", "ê°ì •ì— ë‘”ê°í•  ìˆ˜ ìˆìŒ ğŸ˜"],
        "ì¥ì _íŒ": "ì—…ë¬´ ê´€ë¦¬ì™€ ì±…ì„ ìˆëŠ” ì—­í• ì—ì„œ ê°•ì ì„ ë°œíœ˜í•´ë³´ì„¸ìš” ğŸ› ï¸",
        "ë‹¨ì _íŒ": "ë‹¤ë¥¸ ì˜ê²¬ì„ ì¡´ì¤‘í•˜ê³  ìœµí†µì„±ì„ ê¸¸ëŸ¬ë³´ì„¸ìš” ğŸŒˆ",
        "ì—°ì˜ˆì¸": [
            "ì €ì§€ ì£¼ë””",
            "ì´ìˆœì¬"
        ]
    },
    "ESTP": {
        "ì„±ê²©": "í–‰ë™ë ¥ ìˆê³  ëª¨í—˜ì ì¸ ì‚¬ì—…ê°€ì˜ˆìš” ğŸ„â€â™‚ï¸ğŸ’¼",
        "ì¥ì ": ["ì‹¤ìš©ì  ğŸ› ï¸", "ì ì‘ë ¥ ìˆìŒ ğŸ¦", "í–‰ë™ë ¥ ê°•í•¨ ğŸš€"],
        "ë‹¨ì ": ["ì¸ë‚´ì‹¬ ë¶€ì¡± â±ï¸", "ê³„íšì„± ë¶€ì¡± ğŸ“âŒ"],
        "ì¥ì _íŒ": "ìœ„ê¸° ëŒ€ì²˜ëŠ¥ë ¥ê³¼ ì‹¤í–‰ë ¥ì„ ì‚´ë ¤ ë„ì „ì ì¸ ì¼ì— ë„ì „í•´ë³´ì„¸ìš” ğŸ†",
        "ë‹¨ì _íŒ": "ì¥ê¸°ì  ëª©í‘œë¥¼ ì„¸ìš°ê³  ê¾¸ì¤€íˆ ì¶”ì§„í•´ë³´ì„¸ìš” ğŸŒ±",
        "ì—°ì˜ˆì¸": [
            "ë„ë„ë“œ íŠ¸ëŸ¼í”„",
            "ì´ìˆ˜ê·¼"
        ]
    },
    "ESFP": {
        "ì„±ê²©": "ììœ ë¡­ê³  ì¦‰í¥ì ì¸ ì—°ì˜ˆì¸ ê¸°ì§ˆì´ì—ìš” ğŸ­âœ¨",
        "ì¥ì ": ["ì‚¬êµì  ğŸ¥‚", "ì—ë„ˆì§€ ë„˜ì¹¨ âš¡", "ê¸ì •ì  ğŸŒˆ"],
        "ë‹¨ì ": ["ì¶©ë™ì  ğŸ¯", "ê³„íšì„± ë¶€ì¡± ğŸ“…âŒ"],
        "ì¥ì _íŒ": "ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ë©° ì˜ˆìˆ ì  ì¬ëŠ¥ì„ ë°œíœ˜í•´ë³´ì„¸ìš” ğŸ¨",
        "ë‹¨ì _íŒ": "ì¤‘ìš”í•œ ê²°ì • ì „ì— ì¶©ë¶„íˆ ìƒê°í•˜ëŠ” ìŠµê´€ì„ ë“¤ì—¬ë³´ì„¸ìš” ğŸ¤”",
        "ì—°ì˜ˆì¸": [
            "ë§ˆë¦´ë¦° ë¨¼ë¡œ",
            "ì´íš¨ë¦¬"
        ]
    },
    "ESFJ": {
        "ì„±ê²©": "ì¸ê¸° ë§ê³  ì„¸ì‹¬í•œ ì‚¬êµê°€ì˜ˆìš” ğŸ¥°ğŸ‘‹",
        "ì¥ì ": ["í˜‘ì¡°ì  ğŸ¤", "ì¡°ì§ì  ğŸ“‹", "ì‚¬ëŒ ê´€ê³„ì— ëŠ¥í•¨ ğŸ‘¥"],
        "ë‹¨ì ": ["ë¹„íŒì— ë¯¼ê°í•¨ ğŸ˜¢", "ì§€ë‚˜ì¹œ ë™ì¡° ê²½í–¥ ğŸ‘"],
        "ì¥ì _íŒ": "ì‚¬ëŒë“¤ì„ ëª¨ìœ¼ê³  ëŒë³´ëŠ” ëŠ¥ë ¥ì„ ì‚´ë ¤ë³´ì„¸ìš” ğŸ’",
        "ë‹¨ì _íŒ": "ìì‹ ì˜ ì˜ê²¬ë„ ì†Œì¤‘íˆ ì—¬ê¸°ê³  í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš” ğŸ—£ï¸",
        "ì—°ì˜ˆì¸": [
            "í…Œì¼ëŸ¬ ìŠ¤ìœ„í”„íŠ¸",
            "ì „í˜„ë¬´"
        ]
    },
    "ISTJ": {
        "ì„±ê²©": "ì‹ ì¤‘í•˜ê³  ì±…ì„ê° ìˆëŠ” í˜„ì‹¤ì£¼ì˜ìì˜ˆìš” ğŸ“ğŸ§®",
        "ì¥ì ": ["ë¯¿ìŒì§í•¨ ğŸ¤", "ì²´ê³„ì  ğŸ“Š", "ê¼¼ê¼¼í•¨ ğŸ”"],
        "ë‹¨ì ": ["ë³€í™”ë¥¼ êº¼ë¦¼ ğŸ”„âŒ", "ìœµí†µì„± ë¶€ì¡± ğŸš§"],
        "ì¥ì _íŒ": "ì„¸ë¶€ ì‚¬í•­ì„ ê¼¼ê¼¼íˆ ì‚´í”¼ëŠ” ëŠ¥ë ¥ì„ ì—…ë¬´ì— í™œìš©í•´ë³´ì„¸ìš” ğŸ“‹",
        "ë‹¨ì _íŒ": "ì‘ì€ ë³€í™”ë¶€í„° ì‹œë„í•˜ë©° ì ì‘ë ¥ì„ í‚¤ì›Œë³´ì„¸ìš” ğŸŒ±",
        "ì—°ì˜ˆì¸": [
            "í€¸ ì—˜ë¦¬ìë² ìŠ¤ 2ì„¸",
            "ì‹ ë™ì—½"
        ]
    },
    "ISTP": {
        "ì„±ê²©": "ì¡°ìš©í•˜ê³  ë¶„ì„ì ì¸ ê¸°ìˆ ìì˜ˆìš” ğŸ”§ğŸ”",
        "ì¥ì ": ["ì‹¤ìš©ì  ğŸ› ï¸", "ì ì‘ë ¥ ê°•í•¨ ğŸ¦", "ë¬¸ì œí•´ê²° ëŠ¥ë ¥ ğŸ§©"],
        "ë‹¨ì ": ["ê°ì •í‘œí˜„ ë¶€ì¡± ğŸ˜¶", "ì¥ê¸°ì  ê³„íš ì–´ë ¤ì›€ ğŸ—“ï¸"],
        "ì¥ì _íŒ": "ê¸°ìˆ ì  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ì„ ì‚´ë ¤ë³´ì„¸ìš” âš™ï¸",
        "ë‹¨ì _íŒ": "ê°ì •ì„ í‘œí˜„í•˜ê³  ì¥ê¸°ì  ëª©í‘œë¥¼ ì„¸ì›Œë³´ì„¸ìš” ğŸ¯",
        "ì—°ì˜ˆì¸": [
            "í´ë¦°íŠ¸ ì´ìŠ¤íŠ¸ìš°ë“œ",
            "í˜„ë¹ˆ"
        ]
    },
    "ISFP": {
        "ì„±ê²©": "ê°ì„±ì ì´ê³  ì˜ˆìˆ ì ì¸ ëª¨í—˜ê°€ì˜ˆìš” ğŸ¨ğŸ¦‹",
        "ì¥ì ": ["ì°½ì˜ì  ğŸ–Œï¸", "ê°ì„±ì´ í’ë¶€í•¨ ğŸ’", "í‰í™”ë¡œì›€ ğŸ•Šï¸"],
        "ë‹¨ì ": ["ê²½ìŸì„ í”¼í•¨ ğŸ†âŒ", "ê³„íšì„± ë¶€ì¡± ğŸ“†"],
        "ì¥ì _íŒ": "ì˜ˆìˆ ì  ê°ê°ì„ ë””ìì¸ì´ë‚˜ ìŒì•… ë“±ì— í™œìš©í•´ë³´ì„¸ìš” ğŸµ",
        "ë‹¨ì _íŒ": "ì‘ì€ ëª©í‘œë¥¼ ì„¸ìš°ê³  ì„±ì·¨ê°ì„ ë§›ë³´ì„¸ìš” âœ…",
        "ì—°ì˜ˆì¸": [
            "ë§ˆì´í´ ì­ìŠ¨",
            "ë°•ì„œì¤€"
        ]
    },
    "ISFJ": {
        "ì„±ê²©": "ë”°ëœ»í•˜ê³  í—Œì‹ ì ì¸ ìˆ˜í˜¸ìì˜ˆìš” ğŸ›¡ï¸ğŸ§¸",
        "ì¥ì ": ["ë°°ë ¤ì‹¬ ê¹ŠìŒ ğŸ’•", "ì±…ì„ê° ìˆìŒ ğŸ“‹", "ê¼¼ê¼¼í•¨ ğŸ”"],
        "ë‹¨ì ": ["ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•¨ ğŸ”„ğŸ˜¨", "ìê¸°ì£¼ì¥ ë¶€ì¡± ğŸ¤"],
        "ì¥ì _íŒ": "ì„¸ì‹¬í•¨ê³¼ ë°°ë ¤ì‹¬ì„ êµìœ¡, ì˜ë£Œ ë“± ëŒë´„ ë¶„ì•¼ì— í™œìš©í•´ë³´ì„¸ìš” ğŸ¥",
        "ë‹¨ì _íŒ": "ìì‹ ì˜ ì˜ê²¬ì„ í‘œí˜„í•˜ê³  ìƒˆë¡œìš´ ê²½í—˜ì„ ì‹œë„í•´ë³´ì„¸ìš” ğŸŒˆ",
        "ì—°ì˜ˆì¸": [
            "ì¼€ì´íŠ¸ ë¯¸ë“¤í„´",
            "ìˆ˜ì§€"
        ]
    }
}

st.set_page_config(page_title="MBTI ì„±ê²© ë¶„ì„ê¸°", page_icon="ğŸ§¬")
st.title("ğŸ§¬ MBTI ì„±ê²© ë¶„ì„ê¸°")
st.markdown("MBTIë¥¼ ì„ íƒí•˜ë©´ ë‹¹ì‹ ì˜ ì„±ê²©, ì¥ì ê³¼ ë‹¨ì , íŒ, ê·¸ë¦¬ê³  ê°™ì€ ìœ í˜•ì˜ ì—°ì˜ˆì¸ì„ ì•Œë ¤ë“œë¦´ê²Œìš”! ğŸ˜„")

selected_mbti = st.selectbox("ğŸ‘‰ ë‹¹ì‹ ì˜ MBTIë¥¼ ì„ íƒí•˜ì„¸ìš”!", list(mbti_info.keys()))

if selected_mbti:
    info = mbti_info[selected_mbti]

    st.subheader(f"ğŸ“Œ {selected_mbti}ì˜ ì„±ê²©")
    st.write(info["ì„±ê²©"])

    st.subheader("ğŸ‘ ì¥ì ")
    for good in info["ì¥ì "]:
        st.markdown(f"- {good}")
    st.markdown(f"ğŸ’¡ **ì¥ì ì„ ì‚´ë¦¬ëŠ” ë°©ë²•**: {info['ì¥ì _íŒ']}")

    st.subheader("ğŸ‘ ë‹¨ì ")
    for bad in info["ë‹¨ì "]:
        st.markdown(f"- {bad}")
    st.markdown(f"ğŸ› ï¸ **ë‹¨ì ì„ ì¤„ì´ëŠ” ë°©ë²•**: {info['ë‹¨ì _íŒ']}")

    st.subheader("ğŸŒŸ ê°™ì€ MBTI ì—°ì˜ˆì¸")
    col1, col2 = st.columns(2)
    
    for i, name in enumerate(info["ì—°ì˜ˆì¸"]):
        # ì´ë¦„ìœ¼ë¡œ ì´ë¯¸ì§€ ìƒì„±
        img = get_character_image(name, selected_mbti)
        
        if i % 2 == 0:
            with col1:
                # ì´ë¯¸ì§€ë¥¼ base64ë¡œ í‘œì‹œ
                img_str = get_image_base64(img)
                st.markdown(f"""
                <div style="text-align: center; border-radius: 10px; overflow: hidden; 
                            background-color: #f0f0f0; padding: 10px;">
                    <img src="data:image/jpeg;base64,{img_str}" style="width: 100%; border-radius: 10px;">
                    <p style="margin-top: 8px; font-weight: bold;">ğŸ¬ {name}</p>
                </div>
                """, unsafe_allow_html=True)
        else:
            with col2:
                # ì´ë¯¸ì§€ë¥¼ base64ë¡œ í‘œì‹œ
                img_str = get_image_base64(img)
                st.markdown(f"""
                <div style="text-align: center; border-radius: 10px; overflow: hidden; 
                            background-color: #f0f0f0; padding: 10px;">
                    <img src="data:image/jpeg;base64,{img_str}" style="width: 100%; border-radius: 10px;">
                    <p style="margin-top: 8px; font-weight: bold;">ğŸ¬ {name}</p>
                </div>
                """, unsafe_allow_html=True)
